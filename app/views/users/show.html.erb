<!-- Generate presenters to render this page -->
<%@user_presenter = presenter_for(@user)%>

<%content_for :head do%>
  <%=render :partial  => "facebook/og",
            :locals   => {
              :title        => @user_presenter.closet_name,
              :type         => "link",
              :description  => @user_presenter.usage_description,
              :url          => @user_presenter.closet_url("fb"),
              :image        => ""}%>
<%end%>


<div class="container profile">

	<div class="row">
    <div class="span12">
	    <div class="well profile-card" 
            style="height: 128px; margin-bottom: 12px;">
	    	
	    		<div class="profile-card-inner">
		    		<div class="profile-img">
							<%=@user_presenter.large_picture('picture')%>
						</div>
		    		<h1 style="padding-bottom: 4px; line-height: 1;">
              <%=@user_presenter.full_name%>
            </h1>
		    		<div id="profile_bio">
					    <%=render :partial  => 'byline',
					              :locals   => {:user => @user}%>
			  		</div>
			  	</div>
	
	    </div> <!-- /well profile-card -->
    </div> <!-- /span12 -->
  </div> <!-- /row -->
	

  <div class="row">
    <div class="span12">
    	<div class="well items">
    	
    		<div class="control-group">
      		<div id="centerstage">
            <%cache ["v1",@user,"followers"] do%>
              <%=render :partial => "users/follower", 
                  :collection => @user.ifollowers,
                  :as => :user%>
            <%end%>
          </div>
      	</div>
      	
      </div> <!-- /well items-->
    </div> <!-- /span12 -->
  </div> <!-- /row -->
  
</div> <!-- /container profile -->


<%content_for :javascript do%>

  <script type="text/javascript">

    //new Denwen.Views.Users.Show({
    //      userJSON        : <%#@user.to_json(
    //                            :only => [:id,:first_name,:last_name,
    //                                      :handle,:byline,:followings_count,
    //                                      :products_count,
    //                                      :inverse_followings_count])%>,
    //      currentUserJSON : <%#self.current_user.to_json(
    //                            :only    => [:id,:first_name,:last_name,
    //                                          :gender,:handle,:email],
    //                            :methods => [:age])%>,
    //      source          : "<%#@source%>"});

  </script>
<%end%>

